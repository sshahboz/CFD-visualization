var ln=Object.defineProperty;var pn=(t,e,n)=>e in t?ln(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var je=(t,e,n)=>(pn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function hn(t){return t}function Me(t){if(t===null||t==="null")return null;if(t==="true")return!0;if(t==="false")return!1;if(!(t===void 0||t==="undefined"))return t[0]==="["&&t[t.length-1]==="]"?t.substring(1,t.length-1).split(",").map(e=>Me(e.trim())):t===""||Number.isNaN(Number(t))?t:Number(t)}function yn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location.search;const n={},r=t?Me:hn;return(e||"").replace(/#.*/,"").replace("?","").split("&").forEach(o=>{const[s,a]=o.split("=").map(f=>decodeURIComponent(f));s&&(n[s]=a?r(a):!0)}),n}var V={toNativeType:Me,extractURLParameters:yn};function oe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function gn(t,e={},n=null){e.isA||(e.isA=[]),n&&e.isA.push(n),t.isA||(t.isA=r=>e.isA.indexOf(r)!==-1)}function dn(t,e={},n=[]){n.forEach(r=>{t[`set${oe(r)}`]=i=>{e[r]=i}})}function wn(t,e={},n=[]){n.forEach(r=>{t[`get${oe(r)}`]=()=>e[r]})}function mn(t,e={}){const n=t.destroy;e.subscriptions||(e.subscriptions=[]),t.destroy=()=>{for(n&&n();e.subscriptions&&e.subscriptions.length;)e.subscriptions.pop().unsubscribe();Object.keys(e).forEach(r=>{delete e[r]}),e.deleted=!0}}function vn(t,e,n,r=!0){const i=[],o=t.destroy;function s(f){i[f]=null}function a(f){function c(){s(f)}return Object.freeze({unsubscribe:c})}t[`fire${oe(n)}`]=(...f)=>{if(e.deleted){console.log("instance deleted - can not call any method");return}function c(){i.forEach(l=>{if(l)try{l.apply(t,f)}catch(h){console.log("Error event:",n,h)}})}r?setTimeout(c,0):c()},t[`on${oe(n)}`]=f=>{if(e.deleted)return console.log("instance deleted - can not call any method"),null;const c=i.length;return i.push(f),a(c)},t.destroy=()=>{o(),i.forEach((f,c)=>s(c))}}function Sn(...t){return(...e)=>t.filter(n=>!!n).forEach(n=>n(...e))}function xn(t){return(e={})=>{const n={},r={};return t(r,n,e),Object.freeze(r)}}const v={chain:Sn,destroy:mn,event:vn,get:wn,isA:gn,newInstance:xn,set:dn},He=[];function En(t,e){t.start=n=>{var r=new XMLHttpRequest,i=e.endPoint;r.open("POST",i,!0),n.headers&&(Object.entries(n.headers).forEach(([s,a])=>r.setRequestHeader(s,a)),delete n.headers),r.responseType="json";const o="response"in r&&r.responseType==="json";r.onload=s=>{const a=o?r.response:JSON.parse(r.response);if(r.status===200&&a&&!a.error){He.push(a),t.fireProcessReady(a);return}t.fireError(r)},r.onerror=s=>{t.fireError(r)},r.send(JSON.stringify(n))},t.fetchConnection=n=>{var r=new XMLHttpRequest,i=[e.endPoint,n].join("/");r.open("GET",i,!0),r.responseType="json";const o="response"in r&&r.responseType==="json";r.onload=s=>{if(this.status===200){t.fireFetch(o?r.response:JSON.parse(r.response));return}t.fireError(r)},r.onerror=s=>{t.fireError(r)},r.send()},t.stop=n=>{var r=new XMLHttpRequest,i=[e.endPoint,n.id].join("/");r.open("DELETE",i,!0),r.responseType="json";const o="response"in r&&r.responseType==="json";r.onload=s=>{if(this.status===200){const a=o?r.response:JSON.parse(r.response);t.fireProcessStopped(a);return}t.fireError(r)},r.onerror=s=>{t.fireError(r)},r.send()},t.listConnections=()=>He}const Un={endPoint:null};function yt(t,e,n={}){Object.assign(e,Un,n),v.destroy(t,e),v.event(t,e,"ProcessReady"),v.event(t,e,"ProcessStopped"),v.event(t,e,"Fetch"),v.event(t,e,"Error"),v.isA(t,e,"ProcessLauncher"),En(t,e)}const Tn=v.newInstance(yt),Cn={newInstance:Tn,extend:yt},Be=4,Fe=0,gt=Be,Ie=Fe+gt,dt=Be,wt=Ie+dt,On=Be,W=gt+dt+On;function bn(t,e,n){const r=new ArrayBuffer(W),i=new Uint8Array(r),o=new DataView(r);return o.setUint32(Fe,t,!0),o.setUint32(Ie,e,!0),o.setUint32(wt,n,!0),i}function Ln(t){const e=new DataView(t.buffer),n=e.getUint32(Fe,!0),r=e.getUint32(Ie,!0),i=e.getUint32(wt,!0);return{id:n,offset:r,size:i}}function*We(t,e){const n=t.byteLength;let r;e===0?r=n:r=Math.max(e-W,1);const i=new Uint32Array(1);crypto.getRandomValues(i);let o=0;for(;o<n;){const s=Math.min(r,n-o),a=new Uint8Array(new ArrayBuffer(W+s)),f=bn(i[0],o,n);a.set(new Uint8Array(f.buffer),0),a.set(t.subarray(o,o+s),W),yield a,o+=s}}class $n{constructor(){je(this,"pendingMessages");this.pendingMessages={}}releasePendingMessages(){this.pendingMessages={}}async processChunk(e,n){const r=e.slice(0,W),i=e.slice(W),o=new Uint8Array(await r.arrayBuffer()),{id:s,offset:a,size:f}=Ln(o);let c=this.pendingMessages[s];if(c||(c={receivedSize:0,content:new Uint8Array(f),decoder:n()},this.pendingMessages[s]=c),f!==c.content.byteLength)throw delete this.pendingMessages[s],new Error(`Total size in chunk header for message ${s} does not match total size declared by previous chunk.`);const l=new Uint8Array(await i.arrayBuffer()),h=c.content;if(h.set(l,a),c.receivedSize+=l.byteLength,c.receivedSize>=f){delete this.pendingMessages[s];try{return c.decoder.decode(h)}catch{console.error("Malformed message: ",h.slice(0,100))}}}}var M=4294967295;function Rn(t,e,n){var r=n/4294967296,i=n;t.setUint32(e,r),t.setUint32(e+4,i)}function mt(t,e,n){var r=Math.floor(n/4294967296),i=n;t.setUint32(e,r),t.setUint32(e+4,i)}function vt(t,e){var n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function _n(t,e){var n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}var he,ye,ge,le=(typeof process>"u"||((he=process==null?void 0:process.env)===null||he===void 0?void 0:he.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function Ge(t){for(var e=t.length,n=0,r=0;r<e;){var i=t.charCodeAt(r++);if(i&4294967168)if(!(i&4294965248))n+=2;else{if(i>=55296&&i<=56319&&r<e){var o=t.charCodeAt(r);(o&64512)===56320&&(++r,i=((i&1023)<<10)+(o&1023)+65536)}i&4294901760?n+=4:n+=3}else{n++;continue}}return n}function kn(t,e,n){for(var r=t.length,i=n,o=0;o<r;){var s=t.charCodeAt(o++);if(s&4294967168)if(!(s&4294965248))e[i++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<r){var a=t.charCodeAt(o);(a&64512)===56320&&(++o,s=((s&1023)<<10)+(a&1023)+65536)}s&4294901760?(e[i++]=s>>18&7|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128):(e[i++]=s>>12&15|224,e[i++]=s>>6&63|128)}else{e[i++]=s;continue}e[i++]=s&63|128}}var Q=le?new TextEncoder:void 0,An=le?typeof process<"u"&&((ye=process==null?void 0:process.env)===null||ye===void 0?void 0:ye.TEXT_ENCODING)!=="force"?200:0:M;function Dn(t,e,n){e.set(Q.encode(t),n)}function Mn(t,e,n){Q.encodeInto(t,e.subarray(n))}var Bn=Q!=null&&Q.encodeInto?Mn:Dn,Fn=4096;function St(t,e,n){for(var r=e,i=r+n,o=[],s="";r<i;){var a=t[r++];if(!(a&128))o.push(a);else if((a&224)===192){var f=t[r++]&63;o.push((a&31)<<6|f)}else if((a&240)===224){var f=t[r++]&63,c=t[r++]&63;o.push((a&31)<<12|f<<6|c)}else if((a&248)===240){var f=t[r++]&63,c=t[r++]&63,l=t[r++]&63,h=(a&7)<<18|f<<12|c<<6|l;h>65535&&(h-=65536,o.push(h>>>10&1023|55296),h=56320|h&1023),o.push(h)}else o.push(a);o.length>=Fn&&(s+=String.fromCharCode.apply(String,o),o.length=0)}return o.length>0&&(s+=String.fromCharCode.apply(String,o)),s}var In=le?new TextDecoder:null,Nn=le?typeof process<"u"&&((ge=process==null?void 0:process.env)===null||ge===void 0?void 0:ge.TEXT_DECODER)!=="force"?200:0:M;function Vn(t,e,n){var r=t.subarray(e,e+n);return In.decode(r)}var ee=function(){function t(e,n){this.type=e,this.data=n}return t}(),zn=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t){zn(e,t);function e(n){var r=t.call(this,n)||this,i=Object.create(e.prototype);return Object.setPrototypeOf(r,i),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:e.name}),r}return e}(Error),jn=-1,Hn=4294967296-1,Wn=17179869184-1;function Gn(t){var e=t.sec,n=t.nsec;if(e>=0&&n>=0&&e<=Wn)if(n===0&&e<=Hn){var r=new Uint8Array(4),i=new DataView(r.buffer);return i.setUint32(0,e),r}else{var o=e/4294967296,s=e&4294967295,r=new Uint8Array(8),i=new DataView(r.buffer);return i.setUint32(0,n<<2|o&3),i.setUint32(4,s),r}else{var r=new Uint8Array(12),i=new DataView(r.buffer);return i.setUint32(0,n),mt(i,4,e),r}}function Kn(t){var e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function Pn(t){if(t instanceof Date){var e=Kn(t);return Gn(e)}else return null}function Jn(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:{var n=e.getUint32(0),r=0;return{sec:n,nsec:r}}case 8:{var i=e.getUint32(0),o=e.getUint32(4),n=(i&3)*4294967296+o,r=i>>>2;return{sec:n,nsec:r}}case 12:{var n=vt(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new k("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(t.length))}}function Xn(t){var e=Jn(t);return new Date(e.sec*1e3+e.nsec/1e6)}var Yn={type:jn,encode:Pn,decode:Xn},xt=function(){function t(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Yn)}return t.prototype.register=function(e){var n=e.type,r=e.encode,i=e.decode;if(n>=0)this.encoders[n]=r,this.decoders[n]=i;else{var o=1+n;this.builtInEncoders[o]=r,this.builtInDecoders[o]=i}},t.prototype.tryToEncode=function(e,n){for(var r=0;r<this.builtInEncoders.length;r++){var i=this.builtInEncoders[r];if(i!=null){var o=i(e,n);if(o!=null){var s=-1-r;return new ee(s,o)}}}for(var r=0;r<this.encoders.length;r++){var i=this.encoders[r];if(i!=null){var o=i(e,n);if(o!=null){var s=r;return new ee(s,o)}}}return e instanceof ee?e:null},t.prototype.decode=function(e,n,r){var i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(e,n,r):new ee(n,e)},t.defaultCodec=new t,t}();function se(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}function qn(t){if(t instanceof ArrayBuffer)return new DataView(t);var e=se(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}var Qn=100,Zn=2048,er=function(){function t(e,n,r,i,o,s,a,f){e===void 0&&(e=xt.defaultCodec),n===void 0&&(n=void 0),r===void 0&&(r=Qn),i===void 0&&(i=Zn),o===void 0&&(o=!1),s===void 0&&(s=!1),a===void 0&&(a=!1),f===void 0&&(f=!1),this.extensionCodec=e,this.context=n,this.maxDepth=r,this.initialBufferSize=i,this.sortKeys=o,this.forceFloat32=s,this.ignoreUndefined=a,this.forceIntegerToFloat=f,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return t.prototype.reinitializeState=function(){this.pos=0},t.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},t.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},t.prototype.doEncode=function(e,n){if(n>this.maxDepth)throw new Error("Too deep objects in depth ".concat(n));e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,n)},t.prototype.ensureBufferSizeToWrite=function(e){var n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)},t.prototype.resizeBuffer=function(e){var n=new ArrayBuffer(e),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r},t.prototype.encodeNil=function(){this.writeU8(192)},t.prototype.encodeBoolean=function(e){e===!1?this.writeU8(194):this.writeU8(195)},t.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},t.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error("Too long string: ".concat(e," bytes in UTF-8"))},t.prototype.encodeString=function(e){var n=5,r=e.length;if(r>An){var i=Ge(e);this.ensureBufferSizeToWrite(n+i),this.writeStringHeader(i),Bn(e,this.bytes,this.pos),this.pos+=i}else{var i=Ge(e);this.ensureBufferSizeToWrite(n+i),this.writeStringHeader(i),kn(e,this.bytes,this.pos),this.pos+=i}},t.prototype.encodeObject=function(e,n){var r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)))},t.prototype.encodeBinary=function(e){var n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error("Too large binary: ".concat(n));var r=se(e);this.writeU8a(r)},t.prototype.encodeArray=function(e,n){var r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error("Too large array: ".concat(r));for(var i=0,o=e;i<o.length;i++){var s=o[i];this.doEncode(s,n+1)}},t.prototype.countWithoutUndefined=function(e,n){for(var r=0,i=0,o=n;i<o.length;i++){var s=o[i];e[s]!==void 0&&r++}return r},t.prototype.encodeMap=function(e,n){var r=Object.keys(e);this.sortKeys&&r.sort();var i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error("Too large map object: ".concat(i));for(var o=0,s=r;o<s.length;o++){var a=s[o],f=e[a];this.ignoreUndefined&&f===void 0||(this.encodeString(a),this.doEncode(f,n+1))}},t.prototype.encodeExtension=function(e){var n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error("Too large extension object: ".concat(n));this.writeI8(e.type),this.writeU8a(e.data)},t.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},t.prototype.writeU8a=function(e){var n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n},t.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},t.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},t.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},t.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},t.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},t.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},t.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},t.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),Rn(this.view,this.pos,e),this.pos+=8},t.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),mt(this.view,this.pos,e),this.pos+=8},t}();function de(t){return"".concat(t<0?"-":"","0x").concat(Math.abs(t).toString(16).padStart(2,"0"))}var tr=16,nr=16,rr=function(){function t(e,n){e===void 0&&(e=tr),n===void 0&&(n=nr),this.maxKeyLength=e,this.maxLengthPerKey=n,this.hit=0,this.miss=0,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return t.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},t.prototype.find=function(e,n,r){var i=this.caches[r-1];e:for(var o=0,s=i;o<s.length;o++){for(var a=s[o],f=a.bytes,c=0;c<r;c++)if(f[c]!==e[n+c])continue e;return a.str}return null},t.prototype.store=function(e,n){var r=this.caches[e.length-1],i={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)},t.prototype.decode=function(e,n,r){var i=this.find(e,n,r);if(i!=null)return this.hit++,i;this.miss++;var o=St(e,n,r),s=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(s,o),o},t}(),ir=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(h){s(h)}}function f(l){try{c(r.throw(l))}catch(h){s(h)}}function c(l){l.done?o(l.value):i(l.value).then(a,f)}c((r=r.apply(t,e||[])).next())})},we=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return f([c,l])}}function f(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ke=globalThis&&globalThis.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,f){s=t[o](s),i(a,f,s.done,s.value)})}}function i(o,s,a,f){Promise.resolve(f).then(function(c){o({value:c,done:a})},s)}},G=globalThis&&globalThis.__await||function(t){return this instanceof G?(this.v=t,this):new G(t)},or=globalThis&&globalThis.__asyncGenerator||function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(u){r[u]&&(i[u]=function(p){return new Promise(function(y,g){o.push([u,p,y,g])>1||a(u,p)})})}function a(u,p){try{f(r[u](p))}catch(y){h(o[0][3],y)}}function f(u){u.value instanceof G?Promise.resolve(u.value.v).then(c,l):h(o[0][2],u)}function c(u){a("next",u)}function l(u){a("throw",u)}function h(u,p){u(p),o.shift(),o.length&&a(o[0][0],o[0][1])}},sr=function(t){var e=typeof t;return e==="string"||e==="number"},X=-1,Ne=new DataView(new ArrayBuffer(0)),ar=new Uint8Array(Ne.buffer),Oe=function(){try{Ne.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")}(),Pe=new Oe("Insufficient data"),cr=new rr,ur=function(){function t(e,n,r,i,o,s,a,f){e===void 0&&(e=xt.defaultCodec),n===void 0&&(n=void 0),r===void 0&&(r=M),i===void 0&&(i=M),o===void 0&&(o=M),s===void 0&&(s=M),a===void 0&&(a=M),f===void 0&&(f=cr),this.extensionCodec=e,this.context=n,this.maxStrLength=r,this.maxBinLength=i,this.maxArrayLength=o,this.maxMapLength=s,this.maxExtLength=a,this.keyDecoder=f,this.totalPos=0,this.pos=0,this.view=Ne,this.bytes=ar,this.headByte=X,this.stack=[]}return t.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=X,this.stack.length=0},t.prototype.setBuffer=function(e){this.bytes=se(e),this.view=qn(this.bytes),this.pos=0},t.prototype.appendBuffer=function(e){if(this.headByte===X&&!this.hasRemaining(1))this.setBuffer(e);else{var n=this.bytes.subarray(this.pos),r=se(e),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}},t.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},t.prototype.createExtraByteError=function(e){var n=this,r=n.view,i=n.pos;return new RangeError("Extra ".concat(r.byteLength-i," of ").concat(r.byteLength," byte(s) found at buffer[").concat(e,"]"))},t.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n},t.prototype.decodeMulti=function(e){return we(this,function(n){switch(n.label){case 0:this.reinitializeState(),this.setBuffer(e),n.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return n.sent(),[3,1];case 3:return[2]}})},t.prototype.decodeAsync=function(e){var n,r,i,o;return ir(this,void 0,void 0,function(){var s,a,f,c,l,h,u,p;return we(this,function(y){switch(y.label){case 0:s=!1,y.label=1;case 1:y.trys.push([1,6,7,12]),n=Ke(e),y.label=2;case 2:return[4,n.next()];case 3:if(r=y.sent(),!!r.done)return[3,5];if(f=r.value,s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(f);try{a=this.doDecodeSync(),s=!0}catch(g){if(!(g instanceof Oe))throw g}this.totalPos+=this.pos,y.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return c=y.sent(),i={error:c},[3,12];case 7:return y.trys.push([7,,10,11]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,9];case 8:y.sent(),y.label=9;case 9:return[3,11];case 10:if(i)throw i.error;return[7];case 11:return[7];case 12:if(s){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,a]}throw l=this,h=l.headByte,u=l.pos,p=l.totalPos,new RangeError("Insufficient data in parsing ".concat(de(h)," at ").concat(p," (").concat(u," in the current buffer)"))}})})},t.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},t.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},t.prototype.decodeMultiAsync=function(e,n){return or(this,arguments,function(){var i,o,s,a,f,c,l,h,u;return we(this,function(p){switch(p.label){case 0:i=n,o=-1,p.label=1;case 1:p.trys.push([1,13,14,19]),s=Ke(e),p.label=2;case 2:return[4,G(s.next())];case 3:if(a=p.sent(),!!a.done)return[3,12];if(f=a.value,n&&o===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(f),i&&(o=this.readArraySize(),i=!1,this.complete()),p.label=4;case 4:p.trys.push([4,9,,10]),p.label=5;case 5:return[4,G(this.doDecodeSync())];case 6:return[4,p.sent()];case 7:return p.sent(),--o===0?[3,8]:[3,5];case 8:return[3,10];case 9:if(c=p.sent(),!(c instanceof Oe))throw c;return[3,10];case 10:this.totalPos+=this.pos,p.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return l=p.sent(),h={error:l},[3,19];case 14:return p.trys.push([14,,17,18]),a&&!a.done&&(u=s.return)?[4,G(u.call(s))]:[3,16];case 15:p.sent(),p.label=16;case 16:return[3,18];case 17:if(h)throw h.error;return[7];case 18:return[7];case 19:return[2]}})})},t.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),n=void 0;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){var r=e-128;if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(e<160){var r=e-144;if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else{var i=e-160;n=this.decodeUtf8String(i,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)n=this.readI64();else if(e===217){var i=this.lookU8();n=this.decodeUtf8String(i,1)}else if(e===218){var i=this.lookU16();n=this.decodeUtf8String(i,2)}else if(e===219){var i=this.lookU32();n=this.decodeUtf8String(i,4)}else if(e===220){var r=this.readU16();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(e===221){var r=this.readU32();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(e===222){var r=this.readU16();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(e===223){var r=this.readU32();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(e===196){var r=this.lookU8();n=this.decodeBinary(r,1)}else if(e===197){var r=this.lookU16();n=this.decodeBinary(r,2)}else if(e===198){var r=this.lookU32();n=this.decodeBinary(r,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){var r=this.lookU8();n=this.decodeExtension(r,1)}else if(e===200){var r=this.lookU16();n=this.decodeExtension(r,2)}else if(e===201){var r=this.lookU32();n=this.decodeExtension(r,4)}else throw new k("Unrecognized type byte: ".concat(de(e)));this.complete();for(var o=this.stack;o.length>0;){var s=o[o.length-1];if(s.type===0)if(s.array[s.position]=n,s.position++,s.position===s.size)o.pop(),n=s.array;else continue e;else if(s.type===1){if(!sr(n))throw new k("The type of key must be string or number but "+typeof n);if(n==="__proto__")throw new k("The key __proto__ is not allowed");s.key=n,s.type=2;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)o.pop(),n=s.map;else{s.key=null,s.type=1;continue e}}return n}},t.prototype.readHeadByte=function(){return this.headByte===X&&(this.headByte=this.readU8()),this.headByte},t.prototype.complete=function(){this.headByte=X},t.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new k("Unrecognized array type byte: ".concat(de(e)))}}},t.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new k("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},t.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new k("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},t.prototype.decodeUtf8String=function(e,n){var r;if(e>this.maxStrLength)throw new k("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+n+e)throw Pe;var i=this.pos+n,o;return this.stateIsMapKey()&&(!((r=this.keyDecoder)===null||r===void 0)&&r.canBeCached(e))?o=this.keyDecoder.decode(this.bytes,i,e):e>Nn?o=Vn(this.bytes,i,e):o=St(this.bytes,i,e),this.pos+=n+e,o},t.prototype.stateIsMapKey=function(){if(this.stack.length>0){var e=this.stack[this.stack.length-1];return e.type===1}return!1},t.prototype.decodeBinary=function(e,n){if(e>this.maxBinLength)throw new k("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+n))throw Pe;var r=this.pos+n,i=this.bytes.subarray(r,r+e);return this.pos+=n+e,i},t.prototype.decodeExtension=function(e,n){if(e>this.maxExtLength)throw new k("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var r=this.view.getInt8(this.pos+n),i=this.decodeBinary(e,n+1);return this.extensionCodec.decode(i,r,this.context)},t.prototype.lookU8=function(){return this.view.getUint8(this.pos)},t.prototype.lookU16=function(){return this.view.getUint16(this.pos)},t.prototype.lookU32=function(){return this.view.getUint32(this.pos)},t.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},t.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},t.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},t.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},t.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},t.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},t.prototype.readU64=function(){var e=_n(this.view,this.pos);return this.pos+=8,e},t.prototype.readI64=function(){var e=vt(this.view,this.pos);return this.pos+=8,e},t.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},t.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},t}();function Y(){const t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t}function fr(t,e){let r=0;const i={},o=/^(rpc|publish|system):(\w+(?:\.\w+)*):(?:\d+)$/,s={};let a=null,f=512*1024;const c=new $n;function l(u){if(u&&u.id){if(u.error){const p=i[u.id];p?p.reject(u.error):console.error("Server error:",u.error)}else{const p=o.exec(u.id);if(p){const y=p[1];if(y==="rpc"){const g=i[u.id];if(!g){console.log("session message id without matching call, dropped",u);return}g.resolve(u.result)}else if(y=="publish"){console.assert(i[u.id]===void 0,"publish message received matching in-flight rpc call");const g=p[2];if(!s[g])return;s[g].forEach(S=>S([u.result]))}else if(y=="system"){const g=i[u.id];u.id==="system:c0:0"?(a=u.result.clientID,f=u.result.maxMsgSize||f,g&&g.resolve(a)):(console.error("Unknown system message",u.id),g&&g.reject({code:-32099,message:`Unknown system message ${u.id}`}))}else console.error("Unknown rpc id format",u.id)}}delete i[u.id]}}t.onconnect=u=>{const p=Y(),y="system:c0:0";i[y]=p;const g={wslink:"1.0",id:y,method:"wslink.hello",args:[{secret:e.secret}],kwargs:{}},w=new Je().encode(g);for(let m of We(w,f))e.ws.send(m,{binary:!0});return p.promise},t.call=(u,p=[],y={})=>{const g=Y();if(e.ws&&a&&e.ws.readyState===1){const S=`rpc:${a}:${r++}`;i[S]=g;const w={wslink:"1.0",id:S,method:u,args:p,kwargs:y},U=new Je().encode(w);for(let E of We(U,f))e.ws.send(E,{binary:!0})}else g.reject({code:-32099,message:`RPC call ${u} unsuccessful: connection not open`});return g.promise},t.subscribe=(u,p)=>{const y=Y();return e.ws&&a?(s[u]||(s[u]=[]),s[u].push(p),y.resolve({topic:u,callback:p})):y.reject({code:-32099,message:`Subscribe call ${u} unsuccessful: connection not open`}),{topic:u,callback:p,promise:y.promise,unsubscribe:()=>t.unsubscribe({topic:u,callback:p})}},t.unsubscribe=u=>{const p=Y(),{topic:y,callback:g}=u;if(!s[y])return p.reject({code:-32099,message:`Unsubscribe call ${y} unsuccessful: not subscribed`}),p.promise;const S=s[y].indexOf(g);return S!==-1?(s[y].splice(S,1),p.resolve()):p.reject({code:-32099,message:`Unsubscribe call ${y} unsuccessful: callback not found`}),p.promise},t.close=()=>{const u=Y();return e.ws.close(),c.releasePendingMessages(),u.resolve(),u.promise};function h(){return new ur}t.onmessage=async u=>{const p=await c.processChunk(u.data,h);p&&l(p)},t.addAttachment=u=>u instanceof ArrayBuffer?new DataView(u):u}const lr={secret:"wslink-secret",ws:null};function Et(t,e,n={}){Object.assign(e,lr,n),v.destroy(t,e),v.isA(t,e,"Session"),fr(t,e)}const pr=v.newInstance(Et),hr={newInstance:pr,extend:Et};class Je extends er{encodeObject(e,n){return e instanceof ArrayBuffer&&(e=new DataView(e)),super.encodeObject.call(this,e,n)}}const Ut="wslink-secret";function yr(t){var e=t.indexOf(":"),n=t.substring(0,e);if(n==="ws"||n==="wss")return{type:"websocket",url:t};throw new Error(`Unknown protocol (${n}) for url (${t}).  Unable to create transport object.`)}function gr(t,e){t.connect=()=>{if(!e.urls)return null;var r=[].concat(e.urls),i=[];for(let o=0;o<r.length;o+=1){const s=r[o];try{const a=yr(s);i.push(a)}catch(a){return console.error(a),t.fireConnectionError(t,a),null}}if(e.connection){if(e.connection.url!==i[0].url)e.connection.close();else if(e.connection.readyState===0||e.connection.readyState===1)return e.session}try{e.wsProxy?e.connection=WSLINK.createWebSocket(i[0].url):e.connection=new WebSocket(i[0].url)}catch(o){return console.error(o),t.fireConnectionError(t,o),null}return e.connection.binaryType="blob",e.secret||(e.secret=Ut),e.session=hr.newInstance({ws:e.connection,secret:e.secret}),e.connection.onopen=o=>{e.session&&e.session.onconnect(o).then(()=>{t.fireConnectionReady(t)},s=>{console.error("Connection error",s),t.fireConnectionError(t,s)})},e.connection.onclose=o=>{t.fireConnectionClose(t,o),e.connection=null},e.connection.onerror=o=>{t.fireConnectionError(t,o)},e.connection.onmessage=o=>{e.session.onmessage(o)},e.session},t.getSession=()=>e.session,t.getUrl=()=>e.connection?e.connection.url:void 0;function n(r=10){e.connection&&e.connection.readyState===1&&e.session&&r>0&&e.session.call("application.exit.later",[r]),e.connection&&e.connection.close(),e.connection=null}t.destroy=v.chain(n,t.destroy)}const dr={secret:Ut,connection:null,session:null,retry:!1,wsProxy:!1};function Tt(t,e,n={}){Object.assign(e,dr,n),v.destroy(t,e),v.event(t,e,"ConnectionReady"),v.event(t,e,"ConnectionClose"),v.event(t,e,"ConnectionError"),v.isA(t,e,"WebsocketConnection"),gr(t,e)}const wr=v.newInstance(Tt),mr={newInstance:wr,extend:Tt};function me(t){return t.sessionURL&&(t.sessionURL=t.sessionURL.replaceAll("USE_HOSTNAME",window.location.hostname),t.sessionURL=t.sessionURL.replaceAll("USE_HOST",window.location.host)),t}function vr(t,e=window.location.pathname){if(e.endsWith(".html")||e.endsWith(".htm")){const n=e.split("/");n.pop(),e=n.join("/")}for(;e.length>0&&e[e.length-1]==="/";)e=e.substring(0,e.length-1);return e.length===0?t:`${e}${t}`}const Sr=`${document.baseURI}paraview/`,xr=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.hostname}:${window.location.port}${vr("/ws")}`;function te(t,e){const n=mr.newInstance({urls:e.config.sessionURL,secret:e.config.secret,retry:e.config.retry,wsProxy:e.config.iframe||e.config.wsProxy});return e.subscriptions.push(n.onConnectionReady(t.readyForwarder)),e.subscriptions.push(n.onConnectionError(t.errorForwarder)),e.subscriptions.push(n.onConnectionClose(t.closeForwarder)),e.gc.push(n),n.connect()}function Er(t,e){let n=null;e.gc=[],t.readyForwarder=i=>{n=i.getSession(),t.fireConnectionReady(i)},t.errorForwarder=(i,o)=>{t.fireConnectionError(i,o)},t.closeForwarder=(i,o)=>{t.fireConnectionClose(i,o)},t.connect=()=>{if(e.configDecorator&&(e.config=e.configDecorator(e.config)),e.config=me(e.config),e.config.sessionURL)n=te(t,e);else if(e.config.wsProxy)e.config.sessionURL=e.config.sessionURL||"wss://proxy/",n=te(t,e);else{const i=Cn.newInstance({endPoint:e.config.sessionManagerURL||Sr});e.subscriptions.push(i.onProcessReady(o=>{e.configDecorator?e.config=e.configDecorator(Object.assign({},e.config,o)):e.config=Object.assign({},e.config,o),e.config=me(e.config),n=te(t,e)})),e.subscriptions.push(i.onError(o=>{o&&o.response&&o.response.error?t.errorForwarder(o,o.response.error):(e.config.sessionURL=xr,e.config=me(e.config),n=te(t,e))})),i.start(e.config),e.gc.push(i)}},t.getSession=()=>n;function r(i){for(n&&(i>0&&n.call("application.exit.later",[i]),n.close()),n=null;e.gc.length;)e.gc.pop().destroy()}t.destroy=v.chain(r,t.destroy)}const Ur={config:{}};function Ct(t,e,n={}){Object.assign(e,Ur,n),v.destroy(t,e),v.event(t,e,"ConnectionReady"),v.event(t,e,"ConnectionClose"),v.event(t,e,"ConnectionError"),v.isA(t,e,"SmartConnect"),v.get(t,e,["config","configDecorator"]),v.set(t,e,["configDecorator"]),Er(t,e)}const Tr=v.newInstance(Ct),Cr={newInstance:Tr,extend:Ct};var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Or=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n},Xe=Object.prototype.toString,Ot=function(e){var n=Xe.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Xe.call(e.callee)==="[object Function]"),r},ve,Ye;function br(){if(Ye)return ve;Ye=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Ot,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),s=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(u){var p=u.constructor;return p&&p.prototype===u},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var u in window)try{if(!c["$"+u]&&e.call(window,u)&&window[u]!==null&&typeof window[u]=="object")try{f(window[u])}catch{return!0}}catch{return!0}return!1}(),h=function(u){if(typeof window>"u"||!l)return f(u);try{return f(u)}catch{return!1}};t=function(p){var y=p!==null&&typeof p=="object",g=n.call(p)==="[object Function]",S=r(p),w=y&&n.call(p)==="[object String]",m=[];if(!y&&!g&&!S)throw new TypeError("Object.keys called on a non-object");var U=s&&g;if(w&&p.length>0&&!e.call(p,0))for(var E=0;E<p.length;++E)m.push(String(E));if(S&&p.length>0)for(var b=0;b<p.length;++b)m.push(String(b));else for(var O in p)!(U&&O==="prototype")&&e.call(p,O)&&m.push(String(O));if(o)for(var R=h(p),$=0;$<a.length;++$)!(R&&a[$]==="constructor")&&e.call(p,a[$])&&m.push(a[$]);return m}}return ve=t,ve}var Lr=Array.prototype.slice,$r=Ot,qe=Object.keys,ie=qe?function(e){return qe(e)}:br(),Qe=Object.keys;ie.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return $r(r)?Qe(Lr.call(r)):Qe(r)})}else Object.keys=ie;return Object.keys||ie};var Rr=ie,_r=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,n);if(s.value!==i||s.enumerable!==!0)return!1}return!0},Ze=typeof Symbol<"u"&&Symbol,kr=_r,Ar=function(){return typeof Ze!="function"||typeof Symbol!="function"||typeof Ze("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:kr()},Dr="Function.prototype.bind called on incompatible ",Se=Array.prototype.slice,Mr=Object.prototype.toString,Br="[object Function]",Fr=function(e){var n=this;if(typeof n!="function"||Mr.call(n)!==Br)throw new TypeError(Dr+n);for(var r=Se.call(arguments,1),i,o=function(){if(this instanceof i){var l=n.apply(this,r.concat(Se.call(arguments)));return Object(l)===l?l:this}else return n.apply(e,r.concat(Se.call(arguments)))},s=Math.max(0,n.length-r.length),a=[],f=0;f<s;f++)a.push("$"+f);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var c=function(){};c.prototype=n.prototype,i.prototype=new c,c.prototype=null}return i},Ir=Fr,bt=Function.prototype.bind||Ir,Nr=bt,Vr=Nr.call(Function.call,Object.prototype.hasOwnProperty),d,P=SyntaxError,Lt=Function,K=TypeError,xe=function(t){try{return Lt('"use strict"; return ('+t+").constructor;")()}catch{}},I=Object.getOwnPropertyDescriptor;if(I)try{I({},"")}catch{I=null}var Ee=function(){throw new K},zr=I?function(){try{return arguments.callee,Ee}catch{try{return I(arguments,"callee").get}catch{return Ee}}}():Ee,j=Ar(),A=Object.getPrototypeOf||function(t){return t.__proto__},H={},jr=typeof Uint8Array>"u"?d:A(Uint8Array),N={"%AggregateError%":typeof AggregateError>"u"?d:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?d:ArrayBuffer,"%ArrayIteratorPrototype%":j?A([][Symbol.iterator]()):d,"%AsyncFromSyncIteratorPrototype%":d,"%AsyncFunction%":H,"%AsyncGenerator%":H,"%AsyncGeneratorFunction%":H,"%AsyncIteratorPrototype%":H,"%Atomics%":typeof Atomics>"u"?d:Atomics,"%BigInt%":typeof BigInt>"u"?d:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?d:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?d:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?d:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?d:Float32Array,"%Float64Array%":typeof Float64Array>"u"?d:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?d:FinalizationRegistry,"%Function%":Lt,"%GeneratorFunction%":H,"%Int8Array%":typeof Int8Array>"u"?d:Int8Array,"%Int16Array%":typeof Int16Array>"u"?d:Int16Array,"%Int32Array%":typeof Int32Array>"u"?d:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":j?A(A([][Symbol.iterator]())):d,"%JSON%":typeof JSON=="object"?JSON:d,"%Map%":typeof Map>"u"?d:Map,"%MapIteratorPrototype%":typeof Map>"u"||!j?d:A(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?d:Promise,"%Proxy%":typeof Proxy>"u"?d:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?d:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?d:Set,"%SetIteratorPrototype%":typeof Set>"u"||!j?d:A(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?d:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":j?A(""[Symbol.iterator]()):d,"%Symbol%":j?Symbol:d,"%SyntaxError%":P,"%ThrowTypeError%":zr,"%TypedArray%":jr,"%TypeError%":K,"%Uint8Array%":typeof Uint8Array>"u"?d:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?d:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?d:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?d:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?d:WeakMap,"%WeakRef%":typeof WeakRef>"u"?d:WeakRef,"%WeakSet%":typeof WeakSet>"u"?d:WeakSet};try{null.error}catch(t){var Hr=A(A(t));N["%Error.prototype%"]=Hr}var Wr=function t(e){var n;if(e==="%AsyncFunction%")n=xe("async function () {}");else if(e==="%GeneratorFunction%")n=xe("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=xe("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(n=A(i.prototype))}return N[e]=n,n},et={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Z=bt,ae=Vr,Gr=Z.call(Function.call,Array.prototype.concat),Kr=Z.call(Function.apply,Array.prototype.splice),tt=Z.call(Function.call,String.prototype.replace),ce=Z.call(Function.call,String.prototype.slice),Pr=Z.call(Function.call,RegExp.prototype.exec),Jr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Xr=/\\(\\)?/g,Yr=function(e){var n=ce(e,0,1),r=ce(e,-1);if(n==="%"&&r!=="%")throw new P("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new P("invalid intrinsic syntax, expected opening `%`");var i=[];return tt(e,Jr,function(o,s,a,f){i[i.length]=a?tt(f,Xr,"$1"):s||o}),i},qr=function(e,n){var r=e,i;if(ae(et,r)&&(i=et[r],r="%"+i[0]+"%"),ae(N,r)){var o=N[r];if(o===H&&(o=Wr(r)),typeof o>"u"&&!n)throw new K("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new P("intrinsic "+e+" does not exist!")},Qr=function(e,n){if(typeof e!="string"||e.length===0)throw new K("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new K('"allowMissing" argument must be a boolean');if(Pr(/^%?[^%]*%?$/,e)===null)throw new P("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=Yr(e),i=r.length>0?r[0]:"",o=qr("%"+i+"%",n),s=o.name,a=o.value,f=!1,c=o.alias;c&&(i=c[0],Kr(r,Gr([0,1],c)));for(var l=1,h=!0;l<r.length;l+=1){var u=r[l],p=ce(u,0,1),y=ce(u,-1);if((p==='"'||p==="'"||p==="`"||y==='"'||y==="'"||y==="`")&&p!==y)throw new P("property names with quotes must have matching quotes");if((u==="constructor"||!h)&&(f=!0),i+="."+u,s="%"+i+"%",ae(N,s))a=N[s];else if(a!=null){if(!(u in a)){if(!n)throw new K("base intrinsic for "+e+" exists, but the property is not available.");return}if(I&&l+1>=r.length){var g=I(a,u);h=!!g,h&&"get"in g&&!("originalValue"in g.get)?a=g.get:a=a[u]}else h=ae(a,u),a=a[u];h&&!f&&(N[s]=a)}}return a},Zr=Qr,be=Zr("%Object.defineProperty%",!0),Le=function(){if(be)try{return be({},"a",{value:1}),!0}catch{return!1}return!1};Le.hasArrayLengthDefineBug=function(){if(!Le())return null;try{return be([],"length",{value:1}).length!==1}catch{return!0}};var ei=Le,ti=Rr,ni=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",ri=Object.prototype.toString,ii=Array.prototype.concat,$t=Object.defineProperty,oi=function(t){return typeof t=="function"&&ri.call(t)==="[object Function]"},si=ei(),Rt=$t&&si,ai=function(t,e,n,r){e in t&&(!oi(r)||!r())||(Rt?$t(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},_t=function(t,e){var n=arguments.length>2?arguments[2]:{},r=ti(e);ni&&(r=ii.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)ai(t,r[i],e[r[i]],n[r[i]])};_t.supportsDescriptors=!!Rt;var kt=_t,ue={},Ue={get exports(){return ue},set exports(t){ue=t}};typeof self<"u"?Ue.exports=self:typeof window<"u"?Ue.exports=window:Ue.exports=Function("return this")();var ci=ue,At=function(){return typeof q!="object"||!q||q.Math!==Math||q.Array!==Array?ci:q},ui=kt,fi=At,li=function(){var e=fi();if(ui.supportsDescriptors){var n=Object.getOwnPropertyDescriptor(e,"globalThis");(!n||n.configurable&&(n.enumerable||!n.writable||globalThis!==e))&&Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else(typeof globalThis!="object"||globalThis!==e)&&(e.globalThis=e);return e},pi=kt,hi=ue,Dt=At,yi=li,gi=Dt(),Mt=function(){return gi};pi(Mt,{getPolyfill:Dt,implementation:hi,shim:yi});var di=Mt;const _=di(),Bt={vtkObject:()=>null};function F(t){if(t==null||t.isA)return t;if(!t.vtkClass)return _.console&&_.console.error&&_.console.error("Invalid VTK object"),null;const e=Bt[t.vtkClass];if(!e)return _.console&&_.console.error&&_.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(i=>{n[i]&&typeof n[i]=="object"&&n[i].vtkClass&&(n[i]=F(n[i]))});const r=e(n);return r&&r.modified&&r.modified(),r}function wi(t,e){Bt[t]=e}F.register=wi;class Te extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let $e=0;const mi=Symbol("void");function vi(){return $e}const Ft={};function B(){}const Si=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];Si.forEach(t=>{Ft[t]=B});_.console=console.hasOwnProperty("log")?console:Ft;const D={debug:B,error:_.console.error||B,info:_.console.info||B,log:_.console.log||B,warn:_.console.warn||B};function xi(t,e){D[t]&&(D[t]=e||B)}function Ei(){D.log(...arguments)}function Ui(){D.info(...arguments)}function Re(){D.debug(...arguments)}function T(){D.error(...arguments)}function It(){D.warn(...arguments)}const nt={};function Ti(t){nt[t]||(D.error(t),nt[t]=!0)}const L=Object.create(null);L.Float32Array=Float32Array;L.Float64Array=Float64Array;L.Uint8Array=Uint8Array;L.Int8Array=Int8Array;L.Uint16Array=Uint16Array;L.Int16Array=Int16Array;L.Uint32Array=Uint32Array;L.Int32Array=Int32Array;L.Uint8ClampedArray=Uint8ClampedArray;try{L.BigInt64Array=BigInt64Array,L.BigUint64Array=BigUint64Array}catch{}function Ci(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(L[t]||Float64Array)(...n)}function Oi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(L[t]||Float64Array).from(...n)}function Ve(t){return t.charAt(0).toUpperCase()+t.slice(1)}function x(t){return Ve(t[0]==="_"?t.slice(1):t)}function bi(t){return t.charAt(0).toLowerCase()+t.slice(1)}function Li(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let i=Number(t),o="B";for(;i>n;)i/=n,o=r.pop();return`${i.toFixed(e)} ${o}`}function $i(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function Nt(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function Ri(t){return Object.values(L).some(e=>t instanceof e)}function _i(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function ki(t,e){return Object.keys(t).find(n=>t[n]===e)}function Vt(t){return t&&t.isA?t.getState():t}function zt(t){setTimeout(t,0)}function Ai(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function Di(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Nt(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++$e),!("classHierarchy"in e))e.classHierarchy=new Te("vtkObject");else if(!(e.classHierarchy instanceof Te)){const o=new Te;for(let s=0;s<e.classHierarchy.length;s++)o.push(e.classHierarchy[s]);e.classHierarchy=o}function r(o){n[o]=null}function i(o){function s(){r(o)}return Object.freeze({unsubscribe:s})}return t.isDeleted=()=>!!e.deleted,t.modified=o=>{if(e.deleted){T("instance deleted - cannot call any method");return}o&&o<t.getMTime()||(e.mtime=++$e,n.forEach(s=>s&&s(t)))},t.onModified=o=>{if(e.deleted)return T("instance deleted - cannot call any method"),null;const s=n.length;return n.push(o),i(s)},t.getMTime=()=>e.mtime,t.isA=o=>{let s=e.classHierarchy.length;for(;s--;)if(e.classHierarchy[s]===o)return!0;return!1},t.getClassName=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-o]},t.set=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=!1;return Object.keys(o).forEach(c=>{const l=a?null:t[`set${Ve(c)}`];l&&Array.isArray(o[c])&&l.length>1?f=l(...o[c])||f:l?f=l(o[c])||f:(["mtime"].indexOf(c)===-1&&!s&&It(`Warning: Set value to model directly ${c}, ${o[c]}`),f=e[c]!==o[c]||f,e[c]=o[c])}),f},t.get=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];if(!s.length)return e;const f={};return s.forEach(c=>{f[c]=e[c]}),f},t.getReferenceByName=o=>e[o],t.delete=()=>{Object.keys(e).forEach(o=>delete e[o]),n.forEach((o,s)=>r(s)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const o={...e,vtkClass:t.getClassName()};Object.keys(o).forEach(a=>{o[a]===null||o[a]===void 0||a[0]==="_"?delete o[a]:o[a].isA?o[a]=o[a].getState():Array.isArray(o[a])?o[a]=o[a].map(Vt):Ri(o[a])&&(o[a]=Array.from(o[a]))});const s={};return Object.keys(o).sort().forEach(a=>{s[a]=o[a]}),s.mtime&&delete s.mtime,s},t.shallowCopy=function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(o.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${o.getClassName()} into ${t.getClassName()}`);const a=o.get(),f=Object.keys(e).sort();Object.keys(a).sort().forEach(l=>{const h=f.indexOf(l);h===-1?s&&Re(`add ${l} in shallowCopy`):f.splice(h,1),e[l]=a[l]}),f.length&&s&&Re(`Untouched keys: ${f.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const Mi={object(t,e,n){return function(){return{...e[n.name]}}}};function pe(t,e,n){n.forEach(r=>{if(typeof r=="object"){const i=Mi[r.type];i?t[`get${x(r.name)}`]=i(t,e,r):t[`get${x(r.name)}`]=()=>e[r.name]}else t[`get${x(r)}`]=()=>e[r]})}const Bi={enum(t,e,n){const r=`_on${x(n.name)}Changed`;return i=>{var o;if(typeof i=="string"){if(n.enum[i]!==void 0)return e[n.name]!==n.enum[i]?(e[n.name]=n.enum[i],t.modified(),!0):!1;throw T(`Set Enum with invalid argument ${n}, ${i}`),new RangeError("Set Enum with invalid string argument")}if(typeof i=="number"){if(e[n.name]!==i){if(Object.keys(n.enum).map(s=>n.enum[s]).indexOf(i)!==-1){const s=e[n.name];return e[n.name]=i,(o=e[r])==null||o.call(e,t,e,i,s),t.modified(),!0}throw T(`Set Enum outside numeric range ${n}, ${i}`),new RangeError("Set Enum outside numeric range")}return!1}throw T(`Set Enum with invalid argument (String/Number) ${n}, ${i}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){const r=`_on${x(n.name)}Changed`;return i=>{var o;if(!Or(e[n.name],i)){const s=e[n.name];return e[n.name]=i,(o=e[r])==null||o.call(e,t,e,i,s),t.modified(),!0}return!1}}};function rt(t){if(typeof t=="object"){const e=Bi[t.type];if(e)return(n,r)=>e(n,r,t);throw T(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const i=`_on${x(t)}Changed`;return function(s){var a;if(r.deleted)return T("instance deleted - cannot call any method"),!1;if(r[t]!==s){const f=r[t.name];return r[t]=s,(a=r[i])==null||a.call(r,n,r,s,f),n.modified(),!0}return!1}}}function jt(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${x(r.name)}`]=rt(r)(t,e):t[`set${x(r)}`]=rt(r)(t,e)})}function Ht(t,e,n){pe(t,e,n),jt(t,e,n)}function Wt(t,e,n){n.forEach(r=>{t[`get${x(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${x(r)}ByReference`]=()=>e[r]})}function Gt(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(o=>{if(e[o]&&r&&e[o].length!==r)throw new RangeError(`Invalid initial number of values for array (${o})`);const s=`_on${x(o)}Changed`;t[`set${x(o)}`]=function(){var p;if(e.deleted)return T("instance deleted - cannot call any method"),!1;for(var a=arguments.length,f=new Array(a),c=0;c<a;c++)f[c]=arguments[c];let l=f,h,u=!1;if(l.length===1&&(l[0]==null||l[0].length>=0)&&(l=l[0],u=!0),l==null)h=e[o]!==l;else{if(r&&l.length!==r)if(l.length<r&&i!==void 0)for(l=Array.from(l),u=!1;l.length<r;)l.push(i);else throw new RangeError(`Invalid number of values for array setter (${o})`);h=e[o]==null||e[o].length!==l.length;for(let y=0;!h&&y<l.length;++y)h=e[o][y]!==l[y];h&&u&&(l=Array.from(l))}if(h){const y=e[o.name];e[o]=l,(p=e[s])==null||p.call(e,t,e,l,y),t.modified()}return h},t[`set${x(o)}From`]=a=>{const f=e[o];a.forEach((c,l)=>{f[l]=c})}})}function Fi(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;Wt(t,e,n),Gt(t,e,n,r,i)}function Ii(t,e,n){for(let r=0;r<n.length;r++){const i=n[r];e[i]!==void 0&&(e[`_${i}`]=e[i],delete e[i])}}function Ni(t,e,n,r){e.inputData?e.inputData=e.inputData.map(F):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(F):e.inputConnection=[],e.output?e.output=e.output.map(F):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(F):e.inputArrayToProcess=[],e.numberOfInputs=n;function i(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){T("instance deleted - cannot call any method");return}if(y>=e.numberOfInputs){T(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[y]!==p||e.inputConnection[y])&&(e.inputData[y]=p,e.inputConnection[y]=null,t.modified&&t.modified())}function o(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[p]&&(e.inputData[p]=e.inputConnection[p]()),e.inputData[p]}function s(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){T("instance deleted - cannot call any method");return}if(y>=e.numberOfInputs){let g=`algorithm ${t.getClassName()} only has `;g+=`${e.numberOfInputs}`,g+=" input ports. To add more input ports, use addInputConnection()",T(g);return}e.inputData[y]=null,e.inputConnection[y]=p}function a(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[p]}function f(){let p=e.numberOfInputs;for(;p&&!e.inputData[p-1]&&!e.inputConnection[p-1];)p--;return p===e.numberOfInputs&&e.numberOfInputs++,p}function c(p){if(e.deleted){T("instance deleted - cannot call any method");return}s(p,f())}function l(p){if(e.deleted){T("instance deleted - cannot call any method");return}i(p,f())}function h(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(T("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[p])}t.shouldUpdate=()=>{var S,w;const p=t.getMTime();let y=1/0,g=r;for(;g--;){if(!e.output[g]||e.output[g].isDeleted())return!0;const m=e.output[g].getMTime();if(m<p)return!0;m<y&&(y=m)}for(g=e.numberOfInputs;g--;)if((S=e.inputConnection[g])!=null&&S.filter.shouldUpdate()||((w=t.getInputData(g))==null?void 0:w.getMTime())>y)return!0;return!1};function u(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const y=()=>h(p);return y.filter=t,y}if(e.numberOfInputs){let p=e.numberOfInputs;for(;p--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=i,t.setInputConnection=s,t.addInputData=l,t.addInputConnection=c,t.getInputData=o,t.getInputConnection=a}r&&(t.getOutputData=h,t.getOutputPort=u),t.update=()=>{const p=[];if(e.numberOfInputs){let y=0;for(;y<e.numberOfInputs;)p[y]=t.getInputData(y),y++}t.shouldUpdate()&&t.requestData&&t.requestData(p,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=p=>{const y=e.inputArrayToProcess[p],g=e.inputData[p];return y&&g?g[`get${y.fieldAssociation}`]().getArray(y.arrayName):null},t.setInputArrayToProcess=function(p,y,g){let S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<p;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[p]={arrayName:y,fieldAssociation:g,attributeType:S}}}const Kt=Symbol("Event abort");function Vi(t,e,n){const r=[],i=t.delete;let o=1;function s(c){for(let l=0;l<r.length;++l){const[h]=r[l];if(h===c){r.splice(l,1);return}}}function a(c){function l(){s(c)}return Object.freeze({unsubscribe:l})}function f(){if(e.deleted){T("instance deleted - cannot call any method");return}const c=r.slice();for(let l=0;l<c.length;++l){const[,h,u]=c[l];if(h){if(u<0)setTimeout(()=>h.apply(t,arguments),1-u);else if(h.apply(t,arguments)===Kt)break}}}t[`invoke${x(n)}`]=f,t[`on${x(n)}`]=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!c.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return T("instance deleted - cannot call any method"),null;const h=o++;return r.push([h,c,l]),r.sort((u,p)=>p[2]-u[2]),a(h)},t.delete=()=>{i(),r.forEach(c=>{let[l]=c;return s(l)})}}function zi(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={},o={};return t(o,i,r),Object.freeze(o)};return e&&F.register(e,n),n}function ji(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e.filter(s=>!!s).map(s=>s(...i))}}function Pt(t){return t&&t.isA&&t.isA("vtkObject")}function _e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(Pt(t)){if(r.indexOf(t)>=0)return n;r.push(t);const i=e(t);i!==void 0&&n.push(i);const o=t.get();Object.keys(o).forEach(s=>{const a=o[s];Array.isArray(a)?a.forEach(f=>{_e(f,e,n,r)}):_e(a,e,n,r)})}return n}function Hi(t,e,n){var r=this;let i;const o=function(){for(var s=arguments.length,a=new Array(s),f=0;f<s;f++)a[f]=arguments[f];const c=r,l=()=>{i=null,n||t.apply(c,a)},h=n&&!i;clearTimeout(i),i=setTimeout(l,e),h&&t.apply(c,a)};return o.cancel=()=>clearTimeout(i),o}function Wi(t,e){let n=!1,r=null;function i(){n=!1,r!==null&&(o(...r),r=null)}function o(){for(var s=arguments.length,a=new Array(s),f=0;f<s;f++)a[f]=arguments[f];if(n){r=a;return}n=!0,t(...a),setTimeout(i,e)}return o}function Jt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,i)=>{e.keystore[r]=i},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let Gi=1;const ne="__root__";function Ki(t,e){Jt(t,e);const n=t.delete;e.proxyId=`${Gi++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),pe(t,e,["proxyId","proxyGroup","proxyName"]),Ht(t,e,["proxyManager"]);const r={},i={};function o(c,l){i[l]||(i[l]=[]);const h=i[l];for(let u=0;u<c.length;u++)h.push(c[u].name),r[c[u].name]=c[u],c[u].children&&c[u].children.length&&o(c[u].children,c[u].name)}o(e.ui,ne),t.updateUI=c=>{e.ui=JSON.parse(JSON.stringify(c||[])),Object.keys(r).forEach(l=>delete r[l]),Object.keys(i).forEach(l=>delete i[l]),o(e.ui,ne),t.modified()};function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne;return i[c]}t.updateProxyProperty=(c,l)=>{const h=r[c];h?Object.assign(h,l):r[c]={...l}},t.activate=()=>{if(e.proxyManager){const c=`setActive${x(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[c]&&e.proxyManager[c](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(c,l)=>{l in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[l]=[]),e.propertyLinkSubscribers[l].push(c)},t.gcPropertyLinks=c=>{const l=e.propertyLinkSubscribers[c]||[];for(;l.length;)l.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[c])return e.propertyLinkMap[c];let h=null;const u=[];let p=0,y=!1;function g(E){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(y)return null;const O=[];let R=null;for(p=u.length;p--;){const z=u[p];z.instance===E?R=z:O.push(z)}if(!R)return null;const $=R.instance[`get${x(R.propertyName)}`]();if(!_i($,h)||b){for(h=$,y=!0;O.length;){const z=O.pop();z.instance.set({[z.propertyName]:h})}y=!1}return e.propertyLinkMap[c].persistent&&(e.propertyLinkMap[c].value=$),$}function S(E,b){const O=[];for(p=u.length;p--;){const R=u[p];R.instance===E&&(R.propertyName===b||b===void 0)&&(R.subscription.unsubscribe(),O.push(p))}for(;O.length;)u.splice(O.pop(),1)}function w(E,b){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const R=E.onModified(g),$=u[0];return u.push({instance:E,propertyName:b,subscription:R}),O&&(e.propertyLinkMap[c].persistent&&e.propertyLinkMap[c].value!==void 0?E.set({[b]:e.propertyLinkMap[c].value}):$&&g($.instance,!0)),{unsubscribe:()=>S(E,b)}}function m(){for(;u.length;)u.pop().subscription.unsubscribe()}const U={bind:w,unbind:S,unsubscribe:m,persistent:l};return e.propertyLinkMap[c]=U,U};function a(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne;const l=[],h=e.proxyId,u=s(c)||[];for(let p=0;p<u.length;p++){const y=u[p],g=t[`get${x(y)}`],S=g?g():void 0,w={id:h,name:y,value:S},m=a(y);m.length&&(w.children=m),l.push(w)}return l}t.listPropertyNames=()=>a().map(c=>c.name),t.getPropertyByName=c=>a().find(l=>l.name===c),t.getPropertyDomainByName=c=>(r[c]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:a()}),t.delete=()=>{const c=Object.keys(e.propertyLinkMap);let l=c.length;for(;l--;)e.propertyLinkMap[c[l]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function f(){if(e.links)for(let c=0;c<e.links.length;c++){const{link:l,property:h,persistent:u,updateOnBind:p,type:y}=e.links[c];if(y==="application"){const g=e.proxyManager.getPropertyLink(l,u);t.registerPropertyLinkForGC(g,"application"),g.bind(t,h,p)}}}zt(f)}function Pi(t,e,n){const r=t.delete,i=[],o=Object.keys(n);let s=o.length;for(;s--;){const a=o[s],{modelKey:f,property:c,modified:l=!0}=n[a],h=x(c),u=x(a);t[`get${u}`]=e[f][`get${h}`],t[`set${u}`]=e[f][`set${h}`],l&&i.push(e[f].onModified(t.modified))}t.delete=()=>{for(;i.length;)i.pop().unsubscribe();r()}}function Ji(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function i(a){const f=Object.keys(a);let c=f.length;for(;c--;){const l=f[c];e[l].set(a[l])}}const o=Object.keys(r);let s=o.length;for(;s--;){const a=o[s];e[a]=r[a];const f=n[a];t[`set${x(a)}`]=c=>{if(c!==e[a]){e[a]=c;const l=f[c];i(l),t.modified()}}}o.length&&pe(t,e,o)}const it=10,ot=40,st=800;function Xi(t){let e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*it,i=n*it,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode===1?(r*=ot,i*=ot):(r*=st,i*=st)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:i||r}}var C={algo:Ni,capitalize:Ve,chain:ji,debounce:Hi,enumToString:ki,event:Vi,EVENT_ABORT:Kt,formatBytesToProperUnit:Li,formatNumbersWithThousandSeparator:$i,get:pe,getArray:Wt,getCurrentGlobalMTime:vi,getStateArrayMapFunc:Vt,isVtkObject:Pt,keystore:Jt,measurePromiseExecution:Ai,moveToProtected:Ii,newInstance:zi,newTypedArray:Ci,newTypedArrayFrom:Oi,normalizeWheel:Xi,obj:Di,proxy:Ki,proxyPropertyMapping:Pi,proxyPropertyState:Ji,safeArrays:Nt,set:jt,setArray:Gt,setGet:Ht,setGetArray:Fi,setImmediate:zt,setLoggerFunction:xi,throttle:Wi,traverseInstanceTree:_e,TYPED_ARRAYS:L,uncapitalize:bi,VOID:mi,vtkDebugMacro:Re,vtkErrorMacro:T,vtkInfoMacro:Ui,vtkLogMacro:Ei,vtkOnceErrorMacro:Ti,vtkWarningMacro:It};function Yi(t){return{subscribeToImageStream:e=>t.subscribe("viewport.image.push.subscription",e),unsubscribeToImageStream:e=>t.unsubscribe(e),registerView:e=>t.call("viewport.image.push.observer.add",[e]),unregisterView:e=>t.call("viewport.image.push.observer.remove",[e]),enableView:(e,n)=>t.call("viewport.image.push.enabled",[e,n]),render:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{size:[400,400],view:-1};return t.call("viewport.image.push",[e])},resetCamera:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.camera.reset",[e])},invalidateCache:e=>t.call("viewport.image.push.invalidate.cache",[e]),setQuality:function(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return t.call("viewport.image.push.quality",[e,n,r])},setSize:function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:400,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:400;return t.call("viewport.image.push.original.size",[e,n,r])},setServerAnimationFPS:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30;return t.call("viewport.image.animation.fps.max",[e])},getServerAnimationFPS:()=>t.call("viewport.image.animation.fps.get",[]),startAnimation:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.image.animation.start",[e])},stopAnimation:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.image.animation.stop",[e])},updateCamera:function(e,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return t.call("viewport.camera.update",[e??-1,n,r,i,o])},updateCameraParameters:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t.call("viewport.camera.update.params",[e,n,r])}}}function qi(t,e){e.classHierarchy.push("vtkViewStream"),e.imageDecodingPool=[new Image,new Image],e.eventPool=[],e.nextPoolImageIndex=0,e.urlToRevoke=[],e.activeURL=null,e.fps=[],e.lastTime=Date.now(),e.lastImageEvent=null;function n(o){const s=Number(this.dataset.id);t.invokeImageReady(e.eventPool[s])}function r(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;for(;e.imageDecodingPool.length<o;)e.imageDecodingPool.push(new Image);for(let s=0;s<e.imageDecodingPool.length;s++)e.imageDecodingPool[s].dataset.id=s,e.imageDecodingPool[s].onload=n}function i(o){e.eventPool[e.nextPoolImageIndex]=o,o.image=e.imageDecodingPool[e.nextPoolImageIndex++],e.nextPoolImageIndex%=e.imageDecodingPool.length,o.image.src=o.url}t.pushCamera=()=>{const o=e.camera.getReferenceByName("focalPoint"),s=e.camera.getReferenceByName("viewUp"),a=e.camera.getReferenceByName("position"),f=e.camera.getParallelProjection(),c=e.camera.getViewAngle(),l=e.camera.getParallelScale();let h=null;return e.useCameraParameters?h=e.protocol.updateCameraParameters(e.viewId,{focalPoint:o,viewUp:s,position:a,parallelProjection:f,viewAngle:c,parallelScale:l},!1):h=e.protocol.updateCamera(e.viewId,o,s,a,!1),e.isAnimating&&setTimeout(t.pushCamera,1e3/e.cameraUpdateRate),h},t.invalidateCache=()=>e.protocol.invalidateCache(e.viewId),t.render=()=>e.protocol.render({view:e.viewId,size:e.size}),t.resetCamera=()=>e.protocol.resetCamera(e.viewId),t.startAnimation=()=>e.protocol.startAnimation(e.viewId),t.stopAnimation=()=>e.protocol.stopAnimation(e.viewId),t.setSize=(o,s)=>{let a=!1;return(e.size[0]!==o||e.size[1]!==s)&&(e.size=[o,s],a=!0),a&&(t.modified(),e.protocol)?e.protocol.setSize(e.viewId,o,s):Promise.resolve(!1)},t.startInteraction=()=>{const o=[e.protocol.setQuality(e.viewId,e.interactiveQuality,e.interactiveRatio)];return e.camera&&(o.push(t.startAnimation()),e.isAnimating=!0,o.push(t.pushCamera())),Promise.all(o)},t.endInteraction=()=>{const o=[];return o.push(e.protocol.setQuality(e.viewId,e.stillQuality,e.stillRatio)),e.camera?(o.push(t.stopAnimation()),e.isAnimating=!1,o.push(t.pushCamera())):o.push(t.render()),Promise.all(o)},t.setViewId=o=>e.viewId===o||!e.protocol?!1:(e.viewId&&e.protocol.unregisterView(e.viewId),e.viewId=o,e.viewId&&e.protocol.registerView(e.viewId).then(s=>{let{viewId:a}=s;e.viewId=a}),!0),t.processMessage=o=>{if(o.id!=e.viewId)return;const s=new Blob([o.image],{type:e.mimeType});if(e.activeURL)for(e.urlToRevoke.push(e.activeURL),e.activeURL=null;e.urlToRevoke.length>60;){const c=e.urlToRevoke.shift();window.URL.revokeObjectURL(c)}e.activeURL=URL.createObjectURL(s);const a=Date.now(),f=Math.floor(1e4/(a-e.lastTime))/10;for(e.fps.push(f),e.lastTime=a,e.lastImageEvent={url:e.activeURL,fps:f,metadata:{size:o.size,id:o.id,memory:o.memsize,workTime:o.workTime}},e.decodeImage?i(e.lastImageEvent):t.invokeImageReady(e.lastImageEvent);e.fps.length>e.fpsWindowSize;)e.fps.shift()},t.delete=C.chain(()=>{for(e.unregisterViewStream(t),t.setViewId(null);e.urlToRevoke.length;)window.URL.revokeObjectURL(e.urlToRevoke.pop())},t.delete),r()}const Qi={cameraUpdateRate:30,decodeImage:!0,fpsWindowSize:250,interactiveQuality:80,interactiveRatio:1,isAnimating:!1,mimeType:"image/jpeg",size:[-1,-1],stillQuality:100,stillRatio:1,useCameraParameters:!1,viewId:null};function Xt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qi,n),C.obj(t,e),C.event(t,e,"ImageReady"),C.get(t,e,["viewId","size","fps","lastImageEvent"]),C.setGet(t,e,["camera","cameraUpdateRate","decodeImage","fpsWindowSize","interactiveQuality","interactiveRatio","stillQuality","stillRatio","useCameraParameters"]),qi(t,e),Object.assign(t,e.sharedAPI)}const Zi=C.newInstance(Xt,"vtkViewStream");var eo={newInstance:Zi,extend:Xt};function to(t,e){e.classHierarchy.push("vtkImageStream");function n(r){const i=r[0];if(!(!i||!i.image))for(let o=0;o<e.viewStreams.length;o++)e.viewStreams[o].processMessage(i)}t.setServerAnimationFPS=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,i=!1;return e.serverAnimationFPS!==r&&(e.serverAnimationFPS=r,i=!0),e.protocol?(i&&t.modified(),e.protocol.setServerAnimationFPS(r)):Promise.resolve(!0)},t.connect=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yi;e.connected||!r||!i||(e.protocol=i(r),e.protocol.subscribeToImageStream(n).promise.then(o=>{e.renderTopicSubscription=o,e.connected=!0}).catch(o=>{e.connected=!1,console.error(o)}))},t.disconnect=()=>{e.protocol&&e.connected&&e.renderTopicSubscription&&(e.protocol.unsubscribeToImageStream(e.renderTopicSubscription),e.renderTopicSubscription=null),e.connected=!1},t.registerViewStream=r=>{e.viewStreams.push(r)},t.unregisterViewStream=r=>{e.viewStreams=e.viewStreams.filter(i=>i!==r)},t.createViewStream=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-1",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[400,400];const{setServerAnimationFPS:o,getServerAnimationFPS:s,unregisterViewStream:a}=t,f=eo.newInstance({protocol:e.protocol,unregisterViewStream:a,sharedAPI:{setServerAnimationFPS:o,getServerAnimationFPS:s}});return f.setViewId(r),f.setSize(i[0],i[1]),t.registerViewStream(f),f},t.delete=C.chain(()=>{for(;e.viewStreams.length;)e.viewStreams.pop().delete();t.disconnect()},t.delete)}const no={viewStreams:[],serverAnimationFPS:-1};function Yt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,no,n),C.obj(t,e),C.get(t,e,["serverAnimationFPS","protocol"]),to(t,e)}const ro=C.newInstance(Yt,"vtkImageStream");var io={newInstance:ro,extend:Yt};let ke=null;function oo(t){ke=t}function so(t,e){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return new Promise((o,s)=>{e(1),t(...r).then(a=>{e(-1),o(a)},a=>{e(-1),s(a)})})}}function at(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r={};return Object.keys(t).forEach(i=>{n.indexOf(i)===-1?r[i]=so(t[i],e):r[i]=t[i]}),r}function ao(t,e){e.classHierarchy.push("vtkWSLinkClient");function n(){t.invokeBusyChange(e.busyCount)}function r(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.busyCount+=i,e.timeoutId&&(clearTimeout(e.timeoutId),e.timeoutId=0),e.busyCount?n():e.timeoutId=setTimeout(n,e.notificationTimeout)}t.beginBusy=()=>r(1),t.endBusy=()=>r(-1),t.isBusy=()=>!!e.busyCount,t.isConnected=()=>!!e.connection,t.connect=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return ke?e.connection?Promise.reject(new Error("Need to disconnect first")):(e.config=i,e.configDecorator=o||e.configDecorator,new Promise((s,a)=>{e.smartConnect=ke.newInstance({config:i,configDecorator:e.configDecorator}),e.smartConnect.onConnectionReady(f=>{e.connection=f,e.remote={},e.config=e.smartConnect.getConfig();const c=f.getSession();e.protocols=e.protocols||{},Object.keys(e.protocols).forEach(l=>{e.remote[l]=at(e.protocols[l](c),r,e.notBusyList)}),e.createImageStream&&(e.imageStream=io.newInstance(),e.imageStream.connect(c)),t.invokeConnectionReady(t),s(t)}),e.smartConnect.onConnectionError(f=>{t.invokeConnectionError(f),a(f)}),e.smartConnect.onConnectionClose(f=>{t.invokeConnectionClose(f),a(f)}),e.smartConnect.connect()})):Promise.reject(new Error("Need to provide SmartConnect"))},t.disconnect=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:60;e.connection&&(e.connection.destroy(i),e.connection=null)},t.registerProtocol=(i,o)=>{e.remote[i]=at(o(e.connection.getSession()),r,e.notBusyList)},t.unregisterProtocol=i=>{delete e.remote[i]}}const co={notBusyList:[],busyCount:0,timeoutId:0,notificationTimeout:50,createImageStream:!0};function qt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,co,n),C.obj(t,e),C.setGet(t,e,["protocols","notBusyList","createImageStream","configDecorator"]),C.get(t,e,["connection","config","remote","imageStream"]),C.event(t,e,"BusyChange"),C.event(t,e,"ConnectionReady"),C.event(t,e,"ConnectionError"),C.event(t,e,"ConnectionClose"),ao(t,e)}const uo=C.newInstance(qt,"vtkWSLinkClient");var Qt={newInstance:uo,extend:qt,setSmartConnectClass:oo};const fo=t=>({getArray(e,n=!0){return t.call("viewport.geometry.array.get",[e,n]).then(r=>r.buffer?new Blob([r]):r)},getViewState(e,n=!1){return t.call("viewport.geometry.view.get.state",[e,n])},addViewObserver(e){return t.call("viewport.geometry.view.observer.add",[e])},removeViewObserver(e){return t.call("viewport.geometry.view.observer.remove",[e])},subscribeToViewChange(e){return t.subscribe("viewport.geometry.view.subscription",e)},unsubscribe(e){return t.unsubscribe(e)}}),lo=t=>({lifeCycleUpdate(e){return t.call("trame.lifecycle.update",[e])},sendError(e){return t.call("trame.error.client",[e])},getState(){return t.call("trame.state.get",[])},trigger(e,n=[],r={}){return t.call("trame.trigger",[e,n,r])},updateState(e){return t.call("trame.state.update",[e])},subscribeToStateUpdate(e){return t.subscribe("trame.state.topic",e)},subscribeToActions(e){return t.subscribe("trame.actions.topic",e)},unsubscribe(e){return t.unsubscribe(e)}}),po={SyncView:fo,Trame:lo};Qt.setSmartConnectClass(Cr);const ho={"http:":"ws:","https:":"wss:","ws:":"ws:","wss:":"wss:"},yo=["unsubscribe","subscribeToViewChange","subscribeToStateUpdate","subscribeToActions","subscribeToViewChange"];function Zt(t){const e={...t};if(e.sessionURL){let r=e.sessionURL.toLowerCase();const i=window.location;if(r.includes("use_")){const s=new URL(r);s.protocol=ho[i.protocol],r=s.toString()}const o={use_hostname:i.hostname,use_host:i.host};for(const[s,a]of Object.entries(o))r=r.replaceAll(s,a);e.sessionURL=r}e.application=document.querySelector("html").dataset.appName||e.application;const n=document.querySelector("html").dataset.sessionManagerUrl||e.sessionManagerURL;return n&&(e.sessionManagerURL=n),e.useUrl?{...e,...V.extractURLParameters()}:e}function go(){return Qt.newInstance({protocols:po,configDecorator:Zt,notBusyList:yo})}const Ae={configDecorator:Zt,createClient:go};var J=[];function en(t){return new Promise(function(e,n){if(J.indexOf(t)===-1){J.push(t);var r=document.createElement("script");r.type="text/javascript",r.src=t,r.onload=e,r.onerror=n,document.body.appendChild(r)}else e(!1)})}function wo(t){return new Promise(function(e,n){if(J.indexOf(t)===-1){J.push(t);var r=document.createElement("script");r.type="module",r.src=t,r.onload=e,r.onerror=n,document.body.appendChild(r)}else e(!1)})}function mo(t){return new Promise(function(e,n){if(J.indexOf(t)===-1){J.push(t);var r=document.createElement("link");r.rel="stylesheet",r.href=t,r.onload=e,r.onerror=n,document.head.appendChild(r)}else e(!1)})}async function vo(t,e){for(let n=0;n<t.length;n++)await e(t[n])}function Ce(t,e){const n=[],r={};for(let s=0;s<t.length;s++){let a=n,f=t[s];if(Array.isArray(f)){const c=f[1].serial;c&&(r[c]||(r[c]=[]),a=r[c]),[f]=f}a.push(f)}const i=n.map(e),o=Object.values(r);for(let s=0;s<o.length;s++)i.push(vo(o[s],e));return Promise.all(i)}async function So(t){return await Ce(t.trame__styles,mo),await Ce(t.trame__scripts,en),await Ce(t.trame__module_scripts,wo),t.trame__favicon&&(document.querySelector("link[rel=icon]").href=t.trame__favicon),t.trame__title&&(document.title=t.trame__title),t.trame__vue_use.map(e=>{let n=e,r=[];Array.isArray(e)&&([n,...r]=e);let i=window.eval(n);for(let o=0;o<r.length;o++){const s=r[o];s.js_eval&&(r[o]=window.eval(s.js_eval))}if(!i){console.error(`Lookup error: Vue.use(${n}, ${JSON.stringify(r)})`);return}return[i,...r]})}function xo(t,e){return t.priority-e.priority}const ze={priority:0,async decorate(t){if(t==null)return t;if(t.constructor&&t.constructor===File){const{name:e,lastModified:n,size:r,type:i}=t,o=await new Promise(a=>{const f=new FileReader;f.addEventListener("loadend",()=>{a(f.result)}),f.readAsArrayBuffer(t)}),s=new DataView(o);return{name:e,lastModified:n,size:r,type:i,content:s,_filter:["content"]}}return t}},tn={priority:0,async decorate(t){if(t==null||typeof t=="string")return t;if(t.constructor&&t.constructor===FileList||t.length){const e=[];for(let n=0;n<t.length;n++)e.push(await ze.decorate(t[n]));return e}return t}},Eo={priority:0,async decorate(t){if(t==null||typeof t=="string")return t;if(t.constructor&&t.constructor===Object){const e={},n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];e[i]=t[i],e[i]=await tn.decorate(e[i]),e[i]=await ze.decorate(e[i])}return e}return t}},fe=[ze,tn,Eo];function Uo(t){fe.push(t),fe.sort(xo)}async function De(t){let e=t;for(let n=0;n<fe.length;n++){if(e==null)return e;e=await fe[n].decorate(e)}return e}class To{constructor(){this.nextId=1,this.listeners={}}watch(e,n){const r=`${this.nextId++}`;return this.listeners[r]={key:r,dependencies:e,callback:n},()=>delete this.listeners[r]}notifyWatchers(e,n){const r=Object.values(this.listeners),i=new Set(e);for(let o=0;o<r.length;o++){const{dependencies:s,callback:a}=r[o];if(i.intersection(new Set(s)).size){const f=s.map(c=>n[c]);try{a(...f)}catch(c){console.error(`Watcher error with dependencies: ${s}`,c)}}}}getWatchers(){return Object.values(this.listeners)}}class Co{constructor(e){this.name="Default trame application",this.client=e,this.subscriptions=[],this.dirtyKeys=new Set,this.state={},this.keyTS={},this.mtime=0,this.listeners=[],this.ready=!1,this._watchers=new To,this.registerDecorator=Uo;const n=async r=>{var a;const i=[],o=Object.keys(r);for(let f=0;f<o.length;f++){let c=!0;const l=o[f],h=r[l];if((a=h==null?void 0:h._filter)!=null&&a.length){c=!1;const u=this.state[l],p=Object.keys(h);for(let y=0;!c&&y<p.length;y++){const g=p[y];g[0]!=="_"&&(u===void 0||u[g]!==h[g])&&(c=!0)}}c&&(i.push(l),this.state[l]=h)}this.mtime+=1;const s=[];for(let f=0;f<i.length;f++){const c=i[f];this.keyTS[c]===void 0&&s.push(c),this.keyTS[c]=this.mtime}s.length>0&&this.notifyListeners({type:"new-keys",keys:s}),this.notifyListeners({type:"dirty-state",keys:i})};this.subscriptions.push(this.client.getRemote().Trame.subscribeToStateUpdate(([r])=>n(r))),this.subscriptions.push(this.addListener(({type:r,keys:i})=>{r==="dirty-state"&&this._watchers.notifyWatchers(i,this.state)})),this._updateFromServer=n}async loadState(){const{state:e,name:n}=await this.client.getRemote().Trame.getState();this.name=n,this._updateFromServer(e),this.notifyListeners({type:"ready"}),this.ready=!0}notifyListeners(e){for(let n=0;n<this.listeners.length;n++)this.listeners[n](e)}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(n=>n!==e)}getAllKeys(){return Object.keys(this.state)}getMutableStateKeys(){const e=new Set(this.state.trame__disable_mutation||[]);return this.getAllKeys().filter(n=>!e.has(n))}delete(){for(;this.subscriptions.length;)this.client.getRemote().Trame.unsubscribe(this.subscriptions.pop())}get(e){return e===void 0?this.state:this.state[e]}watch(e,n){const r=this._watchers.watch(e,n);return n(...e.map(i=>this.state[i])),r}async set(e,n){this.state[e]!==n&&(this.ts+=1,this.state[e]=n,this.keyTS[e]=this.ts,this.dirty(e),await this.flush())}async update(e){this.ts+=1;for(const[n,r]of Object.entries(e))this.state[n]!==r&&(this.state[n]=r,this.keyTS[n]=this.ts,this.dirty(n));await this.flush()}canDirty(e){return!this.state.trame__client_only.includes(e)}dirty(...e){e.forEach(n=>{this.canDirty(n)&&this.dirtyKeys.add(n)}),this.notifyListeners({type:"dirty-state",keys:e})}async flush(...e){if(e.length&&e.forEach(n=>{Array.isArray(n)?this.dirty(...n):this.dirty(n)}),this.dirtyKeys.size&&!this.client.isBusy()){const n=[],r=[];this.dirtyKeys.forEach(s=>{n.push(De(this.state[s])),r.push(s)}),this.dirtyKeys.clear();const i=await Promise.all(n),o=r.map((s,a)=>({key:s,value:i[a]}));this.client.isConnected()&&await this.client.getRemote().Trame.updateState(o),this.dirtyKeys.size&&this.flush()}this.client.isConnected()||this._updateFromServer(this.state)}}const ct=["type","key","keyCode","controlKey","altKey","shiftKey","position","spinX","spinY","pixelX","pixelY"];function Oo(t){const e={};for(let n=0;n<ct.length;n++){const r=ct[n];r in t&&(e[r]=t[r])}return e}const bo={event:Oo};function nn(t,e=[],n=1e3,r=2){if(t===null)return null;for(let i=0;i<e.length;i++){const o=Array.isArray(n)?n[i]:n,s=e[i];if(t>o)t/=o;else return`${t.toFixed(r)} ${s}`}return`${t.toFixed(r)} ${n[n.length-1]}`}function Lo(t,e=2){return nn(t,["B","KB","MB","GB","TB","PB"],1024,e)}const $o={number:nn,bytes:Lo};async function Ro(t,e,n="application/octet-stream"){const r=await Promise.resolve(e),i=new Blob([r],{type:n}),o=URL.createObjectURL(i),s=document.createElement("a");s.setAttribute("href",o),s.setAttribute("download",t),document.body.appendChild(s),s.click(),document.body.removeChild(s),setTimeout(()=>URL.revokeObjectURL(o),1e3)}function _o(t,e=window){let n=e;const r=t.endsWith("()"),i=(r?t.slice(0,-2):t).split(".");for(let o=0;o<i.length;o++)n=n[i[o]];return r?n():n}function rn(t){try{return JSON.stringify(t),t}catch{}const e={},n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r],o=t[i];if(Array.isArray(o))e[i]=o.map(rn);else try{JSON.stringify(o),e[i]=o}catch{continue}}return e}function ko(t,e,n){const r={id:t},i=e?`${e}: `:"";return Array.isArray(n)?(r.name=`${i}[]`,n.length&&(r.children=[]),r):n===null||!n?(r.name=`${i}${n}`,r):typeof n=="function"?(r.name=`${i}function`,r):typeof n=="object"?(r.name=`${i}{}`,Object.keys(n).length&&(r.children=[]),r):(r.name=`${i}${n}`,r)}function ut(t,e,n,r){const i=ko(e,n,r);t.push(i),i.children&&on(e,i.children,r)}function on(t,e,n){if(Array.isArray(n))for(let i=0;i<n.length;i++)ut(e,`${t}_${i}`,null,n[i]);else{const r=Object.keys(n);for(let i=0;i<r.length;i++){const o=r[i];ut(e,`${t}_${i}`,o,n[o])}}}function Ao(t){const e=[];return on("",e,t),e}const sn={download:Ro,get:_o,safe:rn,tree:Ao,vtk:bo,fmt:$o};function Do(t){const e={app:t,client:null,state:null,config:null,utils:sn,refs:{}};let n=[],r=!1;function i(){var s;return r&&((s=e==null?void 0:e.client)==null?void 0:s.isConnected())}function o(){for(let s=0;s<n.length;s++)n[s]()}return e.addConnectListener=function(a){n.push(a),i()&&a()},e.removeConnectListener=function(a){n=n.filter(f=>f!==a)},e.connect=async function(a){return e.client||(e.client=Ae.createClient()),e.state&&(e.state.delete(),e.client=Ae.createClient()),e.client.isConnected()||await e.client.connect(a),e.client.getConnection().getSession().addAttachment,e.state=new Co(e.client),e.config=e.client.getConfig(),await e.state.loadState(),r=!0,o(),e.config},e.trigger=async function(a,f=[],c={}){let l=[];const h={};if(f){const u=f.map(p=>De(p));l=await Promise.all(u)}if(c){const u=[],p=[];Object.entries(c).forEach(g=>{u.push(g[0]),p.push(De(g[1]))});const y=await Promise.all(p);for(let g=0;g<u.length;g++)h[u[g]]=y[g]}return await e.client.getRemote().Trame.trigger(a,l,h)},window.trame=e,e}const{inject:an,ref:cn,computed:Mo,onMounted:un,onBeforeUnmount:fn,nextTick:Bo,customRef:Fo}=window.Vue;function ft(t,e,n){return Fo((r,i)=>(n[e]=i,{get(){return r(),t.state.get(e)},set(o){t.state.set(e,o),i()}}))}function Io(){const t=an("trame"),e=cn(0),n={},r={trame:t,window,utils:sn,tts:e};t.state.getAllKeys().forEach(o=>{r[o]=ft(t,o,n)});const i=({type:o,keys:s})=>{if(o==="new-keys")for(let a=0;a<s.length;a++){const f=s[a];r[f]===void 0&&(r[f]=ft(t,f,n))}if(o==="dirty-state"){for(let a=0;a<s.length;a++)n[s[a]]();s.includes("trame__favicon")&&t.state.get("trame__favicon")&&(document.querySelector("link[rel=icon]").href=t.state.get("trame__favicon")),s.includes("trame__title")&&t.state.get("trame__title")&&(document.title=t.state.get("trame__title"))}};return un(()=>{t.state.addListener(i)}),fn(()=>{t.state.removeListener(i)}),r.trigger=(...o)=>t.trigger(...o),r.set=(o,s)=>t.state.set(o,s),r.get=o=>r[o],r.setAll=o=>t.state.update(o),r.flushState=(...o)=>t.state.flush(...o),r.registerDecorator=(...o)=>t.state.registerDecorator(...o),r}const No={props:{templateName:{type:String,default:"main"},urlKey:{type:String,default:"ui"},useUrl:{type:Boolean,default:!1}},setup(t){const e=an("trame"),n=cn(0),r=Mo(()=>{let s=t.templateName;return t.useUrl&&V.extractURLParameters()[t.urlKey]&&(s=V.extractURLParameters()[t.urlKey]),`trame-template-${s.toLowerCase()}`.replaceAll("_","-").replaceAll("--","-")});async function i(){await Bo(),n.value++}const o=({type:s,keys:a})=>{if(s==="dirty-state")for(let f=0;f<a.length;f++)a[f].toLowerCase().replaceAll("_","-").replaceAll("--","-")===r.value&&i()};return un(()=>{e.state.addListener(o)}),fn(()=>{e.state.removeListener(o)}),{tts:n,componentName:r}},template:'<component :key="tts" :is="componentName" :name="componentName" />'},{inject:Vo,ref:re,onBeforeMount:zo,onBeforeUnmount:jo}=window.Vue,Ho={props:{useUrl:{type:Boolean,default:!1}},setup(){const t=Vo("trame"),e=re(!1),n=re(!1),r=re(1),i=re(1),o=[];function s(l){const h=`trame-template-${l.toLowerCase().substring(16)}`.replaceAll("_","-").replaceAll("--","-"),u=t.state.get(l);t.app.component(h,{props:["name"],setup:Io,template:u})}const a=({type:l,keys:h})=>{if(l==="dirty-state")for(let u=0;u<h.length;u++){const p=h[u];p.startsWith("trame__template_")&&s(p)}else l==="refresh"?i.value++:l==="ready"&&(n.value=!0,i.value++)};function f(l){r.value=l,t.state&&t.state.set("trame__busy",l),l===0&&t.state.flush()}function c(){var y,g,S;for(;o.length;)o.pop()();if(o.push(t.client.onBusyChange(f).unsubscribe),e.value=t.client.isConnected(),t.state.addListener(a),o.push(()=>t.state.removeListener(a)),t.state.ready){const w=t.state.getAllKeys();for(let m=0;m<w.length;m++){const U=w[m];U.startsWith("trame__template_")&&s(U)}n.value=!0,e.value=!0}function l(w){const{ref:m,type:U}=w,E=t.refs[m];if(E&&U==="method"){const{method:b,args:O}=w;E[b](...O)}if(E&&U==="property"){const{property:b,value:O}=w;E[b]=O}}const h=t.client.getRemote().Trame.subscribeToActions(([w])=>w.map(l));o.push(()=>{var w,m,U;return(U=(m=(w=t==null?void 0:t.client)==null?void 0:w.getRemote())==null?void 0:m.Trame)==null?void 0:U.unsubscribe(h)}),(S=(g=(y=t.client)==null?void 0:y.getRemote())==null?void 0:g.Trame)==null||S.lifeCycleUpdate("client_connected"),window.addEventListener("beforeunload",()=>{var w,m,U;return(U=(m=(w=t.client)==null?void 0:w.getRemote())==null?void 0:m.Trame)==null?void 0:U.lifeCycleUpdate("client_exited")});const u=window.trame.utils.router,p=t.state.get("trame__routes");p!=null&&p.length&&u&&p.forEach(w=>{u.addRoute(w)})}return zo(()=>{t.addConnectListener(c)}),jo(()=>{var l,h,u;for(t.removeConnectListener(c),(u=(h=(l=t.client)==null?void 0:l.getRemote())==null?void 0:h.Trame)==null||u.lifeCycleUpdate("client_unmounted");o.length;)o.pop()()}),{connected:e,ready:n,busy:r,refreshTS:i}},template:'<trame-template v-if="ready" :key="refreshTS" :use-url="useUrl" />'},{unref:Wo}=window.Vue,Go={props:["event"],emits:["exec"],setup(t,{emit:e}){function n(r){r===void 0?e("exec",Wo(t.event)):e("exec",r)}return{exec:n}}},{inject:Ko,ref:lt,onBeforeMount:Po,onBeforeUnmount:Jo,watch:Xo}=window.Vue,Yo={props:["name"],setup(t){const e=Ko("trame"),n=lt(null),r=lt(null);function i(a,f){const c=JSON.parse(JSON.stringify(e.state.get(t.name)));let l=c;const h=String(a).split(".");for(let u=0;u<h.length-1;u++)l=l[h[u]];l[h.at(-1)]=f,e.state.set(t.name,c)}function o(a){e.state.set(t.name,a)}function s(){const a=e.state.get(t.name);r.value!==t.name&&(r.value=t.name),a!==n.value&&(n.value=a)}return Xo(()=>t.name,s),Po(()=>{e.state.addListener(s),s()}),Jo(()=>{e.state.removeListener(s)}),{computedValue:n,computedName:r,updateNested:i,update:o}},template:'<slot :keyName="computedName" :update="update" :updateNested="updateNested" :value="computedValue"></slot>'},qo={props:{message:{type:String,default:"Loading..."}},template:`
        <div style="position:absolute;top:0;left:0;width:100%;height:100%;z-index:1000;">
            <div class="trame__loader"></div>
            <div class="trame__message">{{ message }}</div>
        </div>
    `},{inject:Qo,onMounted:Zo,onBeforeUnmount:es}=window.Vue,ts={props:{message:{type:String,default:"Click to reconnect..."},maxRetry:{type:Number,default:10},delay:{type:Number,default:500}},setup(t){const e=Qo("trame");let n=null,r=0;async function i(){await e.connect()}function o(){n&&(clearInterval(n),n=null)}return Zo(()=>{r=0;const s=V.extractURLParameters().reconnect;s&&(console.log("reconnect",s),s==="auto"&&(n=setInterval(()=>{r++<t.maxRetry?i():o()},t.delay)))}),es(()=>{o()}),{connect:i}},template:`
    <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000;">
      <div style="position: relative;top: 50%;left: 50%;transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);width: 80%;text-align: center;">
        <div style="display: flex;justify-content: space-around;text-align: center;user-select: none;background-color: #f1f1f1;color: black;font-size: 16px;padding: 10px 20px;border: none;cursor: pointer;border-radius: 5px;text-align: center;width: 200px;margin: 10px auto;" @click="connect">
          <svg
            style="width: 24px"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
          >
            <path
              d="M4,1C2.89,1 2,1.89 2,3V7C2,8.11 2.89,9 4,9H1V11H13V9H10C11.11,9 12,8.11 12,7V3C12,1.89 11.11,1 10,1H4M4,3H10V7H4V3M14,13C12.89,13 12,13.89 12,15V19C12,20.11 12.89,21 14,21H11V23H23V21H20C21.11,21 22,20.11 22,19V15C22,13.89 21.11,13 20,13H14M3.88,13.46L2.46,14.88L4.59,17L2.46,19.12L3.88,20.54L6,18.41L8.12,20.54L9.54,19.12L7.41,17L9.54,14.88L8.12,13.46L6,15.59L3.88,13.46M14,15H20V19H14V15Z"
            />
          </svg>
          {{ message }}
        </div>
      </div>
    </div>
      `},{unref:ns}=window.Vue;let rs=1;function is(){return`trame_script_elem_${rs++}`}const os={props:{script:{type:String,default:""},module:{type:Boolean,default:!1}},watch:{script(t){this.updateContent(t)}},created(){this.elemId=is(),this.updateContent(this.script)},beforeUnmount(){this.removeScript()},methods:{updateContent(t){t=ns(t);let e=document.querySelector(`#${this.elemId}`);t?(e||(e=document.createElement("script"),e.id=this.elemId,e.type=this.module?"module":"text/javascript",document.head.appendChild(e)),e.innerHTML=t):this.removeScript()},removeScript(){const t=document.querySelector(`#${this.elemId}`);t&&t.parentNode.removeChild(t)}}},{unref:ss}=window.Vue;let as=1;function cs(){return`trame_style_elem_${as++}`}const us={props:{css:{type:String,default:""}},watch:{css(t){this.updateStyle(t)}},created(){this.elemId=cs(),this.updateStyle(this.css)},beforeUnmount(){this.removeStyle()},methods:{updateStyle(t){t=ss(t);let e=document.querySelector(`#${this.elemId}`);t?(e||(e=document.createElement("style"),e.id=this.elemId,document.head.appendChild(e)),e.innerHTML=t):this.removeStyle()},removeStyle(){const t=document.querySelector(`#${this.elemId}`);t&&t.parentNode.removeChild(t)}}},{watch:fs,nextTick:ls}=window.Vue,ps={props:{value:{type:String},immediate:{type:Boolean,default:!1},triggerChangeOnCreate:{type:Boolean,default:!1}},emits:["change"],setup(t,{emit:e}){fs(()=>t.value,n=>{t.immediate?e("change",n):ls(()=>{e("change",n)})}),t.triggerChangeOnCreate&&e("change",t.value)}},{onMounted:hs,onBeforeUnmount:ys}=window.Vue,gs={emits:["mounted","created","beforeDestroy","beforeUnmount","exit"],setup(t,{emit:e,expose:n}){function r(i,o){e(i,o)}return hs(()=>e("mounted")),ys(()=>{e("beforeDestroy"),e("beforeUnmount")}),window.addEventListener("beforeunload",()=>{e("exit")}),n({emit:r}),e("created"),{emit:r}}},{inject:ds,reactive:ws,onBeforeMount:ms,onBeforeUnmount:vs,watch:Ss}=window.Vue,xs={props:["name"],setup(t){const e=ds("trame"),n=ws({});let r=null,i=null;function o(){i=JSON.stringify(n),i!==r&&e.state.set(t.name,JSON.parse(i))}function s(){r=JSON.stringify(e.state.get(t.name)),r!==i&&Object.assign(n,JSON.parse(r))}function a({type:f,keys:c}){f==="dirty-state"&&c.includes(t.name)&&s()}return ms(()=>{e.state.addListener(a),s()}),vs(()=>{e.state.removeListener(a)}),Ss(n,o),{value:n}},template:'<slot :value="value"></slot>'},{onMounted:Es,onUpdated:Us,onUnmounted:Ts,onBeforeMount:Cs,onBeforeUpdate:Os,onBeforeUnmount:bs}=window.Vue;function Ls(t){t()}const pt={created:Ls,beforeMount:Cs,mounted:Es,beforeUpdate:Os,updated:Us,beforeDestroy:bs,destroyed:Ts},$s={props:{name:{type:String,default:"LifeCycleMonitor"},type:{type:String,default:"log"},value:{type:String,default:"value"},events:{type:Array,default:()=>["created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed"]}},emits:Object.keys(pt),setup(t,{emit:e}){for(let n=0;n<t.events.length;n++){const r=t.events[n],i=pt[r];i(()=>{t.type==="emit"?e(r,{name:t.name,value:t.value}):console[t.type](t.name,r,t.value)})}}},{inject:Rs,ref:_s,onMounted:ks,onBeforeUnmount:As}=window.Vue,Ds={props:{name:{type:String}},emits:["change"],setup(t,{emit:e}){const n=Rs("trame"),r=_s(null);function i(){const{x:s,y:a,width:f,height:c}=r.value.getBoundingClientRect(),l={x:s,y:a,width:f,height:c},h=window.devicePixelRatio,u=96*h,p={size:l,pixelRatio:h,dpi:u};t.name&&(p.name=t.name),n&&n.state.set(t.name,p),e("change",p)}const o=new ResizeObserver(i);return ks(()=>{o.observe(r.value)}),As(()=>{o.unobserve(r.value)}),{elem:r,resize:i}},template:'<div ref="elem" style="overflow: hidden; position: relative; width: 100%; height: 100%; margin: 0; padding: 0;"><slot></slot></div>'},ht={TrameApp:Ho,TrameExec:Go,TrameGetter:Yo,TrameLoading:qo,TrameReconnect:ts,TrameScript:os,TrameStyle:us,TrameTemplate:No,TrameClientStateChange:ps,TrameClientTriggers:gs,TrameDeepReactive:xs,TrameLifeCycleMonitor:$s,TrameSizeObserver:Ds},Ms={install(t){Object.keys(ht).forEach(e=>{t.component(e,ht[e])})}},{createApp:Bs}=window.Vue;async function Fs(){var c,l,h;try{(l=(c=window==null?void 0:window.parent)==null?void 0:c.trameJupyter)!=null&&l.init&&(window.WSLINK=window.parent.trameJupyter.init(window))}catch{}const t=Bs({template:"<trame-app use-url />"});let e=Do(t),n=Ae.configDecorator({application:"trame",useUrl:!0});const r=new URL(window.location).searchParams;["sessionURL","sessionManagerURL","secret","application","remove"].concat(((h=r.get("remove"))==null?void 0:h.split(","))||[]).forEach(u=>r.delete(u));const o=`${window.location.pathname}${r.size?"?":""}${r.toString()}${window.location.hash}`;window.history.replaceState({},document.title,o),e.addConnectListener(()=>{e.client.onConnectionError(u=>{var p;s(((p=u==null?void 0:u.response)==null?void 0:p.error)||"Connection error")}),e.client.onConnectionClose(u=>{var p;s(((p=u==null?void 0:u.response)==null?void 0:p.error)||"Connection closed")})});function s(u){if(e){console.log("about to replace template",u),e.state.set("trame_error_report_msg",u);let p="trame__template_main";V.extractURLParameters().ui&&(p=`trame__template_${V.extractURLParameters().ui}`),n.reconnect?e.state.set(p,e.state.get("trame__template_error_reconnect")||`<trame-reconnect message="${u}"/>`):e.state.set(p,e.state.get("trame__template_error")||`<trame-loading message="${u}"/>`),console.log("template replaced",e.state.get(p))}else t.unmount(),document.querySelector("#app").innerHTML(u)}try{n=await e.connect(n)}catch{s("try/catch on connect()");return}const a=console.error;console.error=(...u)=>{try{e.client.isConnected()&&e.client.getRemote().Trame.sendError(u.join(" "))}catch(p){a(p)}finally{a(...u)}},window.addEventListener("error",u=>console.error(`${u.type}: ${u.message}`)),t.use(Ms),t.provide("trame",e);const f=await So(e.state.state);for(let u=0;u<f.length;u++)t.use(...f[u]),console.info(`Vue.use(${f[u]})`);t.mount("#app")}V.extractURLParameters().enableSharedArrayBufferServiceWorker&&en("coi-serviceworker.min.js");Fs();
